(this["webpackJsonpbrainstorm-press-client"]=this["webpackJsonpbrainstorm-press-client"]||[]).push([[0],{244:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(60),s=n.n(c),o=(n(244),n(245),n(246),n(247),n(248),n(25)),i=n(21),u=n(23),l=n(202),d=n.n(l),j=n(204),b=n.n(j),p=n(436),h=n(422),f=n(435),O=n(0),x=function(){return Object(O.jsx)("footer",{style:m.footer,children:Object(O.jsxs)(f.a,{variant:"overline",style:{fontSize:"0.5rem"},children:[Object(O.jsx)(h.a,{title:"Source code",children:Object(O.jsx)("a",{href:"https://github.com/phrazzld/brainstorm-press-client",style:{textDecoration:"none"},children:Object(O.jsx)(p.a,{id:"source-code",size:"small",edge:"start",color:"inherit","aria-label":"source-code",style:m.footerButton,children:Object(O.jsx)(d.a,{})})})}),Object(O.jsx)(h.a,{title:"FAQ",children:Object(O.jsx)(i.b,{to:"/faq",style:{textDecoration:"none"},children:Object(O.jsx)(p.a,{id:"faq",size:"small",edge:"start",color:"inherit","aria-label":"faq",style:m.footerButton,children:Object(O.jsx)(b.a,{})})})})]})})},m={footer:{position:"fixed",width:"100%",bottom:0,textAlign:"center",height:"2rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",borderTop:"1px solid #e0e0e0",marginTop:"1rem",backgroundColor:"#fafafa"},footerButton:{color:"#1976d2",marginRight:"2rem"}},v=n(208),g=n.n(v),w=n(206),y=n.n(w),k=n(207),S=n.n(k),C=n(209),P=n.n(C),E=n(438),T=n(437),B=n(441),F=n(440),A=n(205),L=n.n(A)()((function(e){return{accessToken:"",setAccessToken:function(t){return e({accessToken:t})},lnToken:"",setLnToken:function(t){return e({lnToken:t})},user:null,setUser:function(t){return e({user:t})}}})),W=n(6),D=n.n(W),I=n(13),z=[401,403],R=Object({NODE_ENV:"production",PUBLIC_URL:"/brainstorm-press-client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).BASE_URL||"",N=function(){var e=Object(I.a)(D.a.mark((function e(t){var n,r,a,c,s,o=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=o[a];return e.next=3,t.apply(null,r);case 3:if(c=e.sent,!z.includes(c.status)){e.next=11;break}return e.next=7,q();case 7:return s=e.sent,e.next=10,t.apply(null,r.slice(0,-1).concat(s));case 10:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(I.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/tokens/access"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(_,t,n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to create new post.");case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/nodes"),{method:"DELETE",headers:{Authorization:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){var a,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(R,"/api/posts?page=").concat(t),n&&(a+="&free=true"),r&&(a+="&search=".concat(r)),e.next=5,fetch(a,{method:"GET"});case 5:return c=e.sent,e.next=8,c.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),H=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r,a){var c,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(R,"/api/posts/users/").concat(t,"?page=").concat(n),r&&(c+="&free=true"),a&&(c+="&search=".concat(a)),e.next=5,fetch(c,{method:"GET"});case 5:return s=e.sent,e.next=8,s.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),K=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/posts/users/").concat(t,"/drafts?page=").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Y=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(K,t,n,r);case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Failed to get drafts.");case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),V=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(R,"/api/posts/subscriptions?page=").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(V,t,n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to get posts from subs.");case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/posts/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Q,t,n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to get post.");case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/nodes"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(X,t,n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to connect to LN.");case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(I.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/nodes"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/nodes/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(te,t,n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to get node status.");case 5:return e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a.status);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/users/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ae=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(re,t,n,r);case 2:if(e.sent.ok){e.next=5;break}throw new Error("Failed to update user.");case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ce=function(){var e=Object(I.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(I.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/users/session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/users/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(oe,t,n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to get user.");case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/users"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(I.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(ue,t);case 2:if((n=e.sent).ok){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/posts/").concat(t,"/invoice"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(de,t,n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to create invoice.");case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/users/").concat(t,"/access"),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(be,t,n);case 2:if(r=e.sent,!z.includes(r.status)){e.next=5;break}return e.abrupt("return",{paid:!1});case 5:if(r.ok){e.next=7;break}throw new Error("Failed to check premium access.");case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/users/").concat(t,"/payments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),fe=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(he,t,n,r);case 2:e.sent.ok||console.warn("Failed to log payment.");case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/posts/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),xe=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Oe,t,n,r);case 2:if(e.sent.ok){e.next=5;break}throw new Error("Failed to update post.");case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),me=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/posts/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(me,t,n);case 2:if(e.sent.ok){e.next=5;break}throw new Error("Failed to delete post.");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/tokens/refresh"),{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/reset-password/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(I.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/reset-password/").concat(n,"/").concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ke=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/users/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(ke,t,n);case 2:if(e.sent.ok){e.next=5;break}throw new Error("Failed to delete user.");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(R,"/api/subscriptions"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(I.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Ce,t);case 2:if(n=e.sent,!z.includes(n.status)){e.next=5;break}return e.abrupt("return",[]);case 5:if(n.ok){e.next=7;break}throw new Error("Could not get subs.");case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/subscriptions"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({authorId:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Te=function(){var e=Object(I.a)(D.a.mark((function e(t,n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Ee,t,n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to subscribe.");case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/subscriptions/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Be,t,n);case 2:if(e.sent.ok){e.next=5;break}throw new Error("Failed to unsubscribe.");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ae=function(){var e=L((function(e){return e.user})),t=L((function(e){return e.setUser})),n=L((function(e){return e.accessToken})),a=L((function(e){return e.setLnToken})),c=Object(u.g)(),s=!["/signup","/login"].includes(c.pathname)&&!e;return Object(r.useEffect)((function(){e||le(n).then((function(e){var n;e&&"object"===typeof e&&(t(e),a((null===(n=e.node)||void 0===n?void 0:n.token)||""))}))}),[e,n,a,t]),Object(O.jsx)(T.a,{style:Le.headerContainer,children:Object(O.jsx)(E.a,{position:"static",children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(f.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(O.jsx)(i.b,{to:"/",style:Le.link,children:"Brainstorm Press"})}),e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.b,{to:"/posts/new",style:Le.link,children:Object(O.jsx)(h.a,{title:"Create",children:Object(O.jsx)(p.a,{id:"create-post-header-button",size:"large",edge:"start",color:"inherit","aria-label":"new-post",children:Object(O.jsx)(y.a,{})})})}),Object(O.jsx)(i.b,{to:"/subscriptions",style:Le.link,children:Object(O.jsx)(h.a,{title:"Subscriptions",children:Object(O.jsx)(p.a,{id:"subs-header-button",size:"large",edge:"start",color:"inherit","aria-label":"subscriptions",children:Object(O.jsx)(S.a,{})})})}),Object(O.jsx)(i.b,{to:"/profile",style:Le.link,children:Object(O.jsx)(h.a,{title:"Profile",children:Object(O.jsx)(p.a,{id:"profile-header-button",size:"large",edge:"start",color:"inherit","aria-label":"settings",children:Object(O.jsx)(g.a,{})})})})]}),s&&Object(O.jsx)(i.b,{to:"/login",style:Le.link,children:Object(O.jsx)(B.a,{color:"inherit",children:"Login"})}),e&&Object(O.jsx)(i.b,{to:{pathname:"/",state:{logout:!0}},style:Le.link,children:Object(O.jsx)(h.a,{title:"Logout",children:Object(O.jsx)(p.a,{id:"logout-header-button",size:"large",edge:"start",color:"inherit","aria-label":"logout",children:Object(O.jsx)(P.a,{})})})})]})})})},Le={headerContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBottom:10,flexGrow:1,position:"sticky",top:0,zIndex:100,marginBottom:20},link:{textDecoration:"none",color:"inherit",marginRight:20}},We=n(93),De=n(17),Ie=n(7),ze=n(116),Re=n(115),Ne=n(424),qe=n(3),_e=n(211),Ue=n.n(_e),Je=n(443),Ge=n(442),He=n(31),Ke=n(5),Ye=n(414),Ve=n(429),Me=n(210),Qe=Object(Ke.a)("div")((function(e){var t=e.theme;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(Ye.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(Ye.a)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"80%"}})),Ze=Object(Ke.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),Xe=Object(Ke.a)(He.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(qe.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("md"),{width:"20ch"})}})),$e=function(e){var t=e.onFreeChanged,n=e.onSearchChanged,a=Object(r.useState)(""),c=Object(Ie.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)(""),u=Object(Ie.a)(i,2),l=u[0],d=u[1],j=Object(r.useState)(!1),b=Object(Ie.a)(j,2),p=b[0],h=b[1],f=Object(r.useCallback)(Me.throttle(d,500),[]);return Object(r.useEffect)((function(){t(p)}),[p,t]),Object(r.useEffect)((function(){n(l)}),[l,n]),Object(O.jsxs)(T.a,{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[Object(O.jsxs)(Qe,{children:[Object(O.jsx)(Ze,{children:Object(O.jsx)(Ue.a,{color:"info"})}),Object(O.jsx)(Xe,{id:"search-bar",placeholder:"Search...",inputProps:{"aria-label":"search"},value:s,onChange:function(e){o(e.target.value),f(e.target.value)}})]}),Object(O.jsx)(Ge.a,{children:Object(O.jsx)(Je.a,{control:Object(O.jsx)(Ve.a,{id:"free-posts-search-toggle",checked:p,onChange:function(e){h((function(e){return!e}))},inputProps:{"aria-label":"controlled"}}),label:"Free"})})]})},et=n(212),tt=n.n(et),nt=n(454),rt=n(455),at=n(456),ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",n=new Date(e),r=n.toLocaleString("default",{month:t}),a=n.getDate(),c=n.getFullYear();return"".concat(r," ").concat(a,", ").concat(c)},st=n(430),ot=function(e){return e.premium?Object(O.jsx)(st.a,{label:"Premium",color:"warning",variant:"outlined"}):Object(O.jsx)(st.a,{label:"Free",color:"success",variant:"outlined"})},it=function(e){var t=e.post,n=Object(r.useState)(""),a=Object(Ie.a)(n,2),c=a[0],s=a[1];return c?Object(O.jsx)(u.a,{to:c}):Object(O.jsx)(nt.a,{className:"post-card",style:ut.card,children:Object(O.jsx)(rt.a,{onClick:function(){s("/posts/".concat(t._id))},children:Object(O.jsxs)(at.a,{children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(O.jsx)(f.a,{variant:"h5",component:"h2",gutterBottom:!0,children:t.title}),Object(O.jsx)(ot,{premium:t.premium})]}),Object(O.jsxs)(f.a,{variant:"h6",component:"h3",gutterBottom:!0,children:["Written by:"," ",Object(O.jsx)(i.b,{to:"/users/".concat(t.user.username,"/blog"),style:{textDecoration:"none"},children:t.user.username})]}),Object(O.jsxs)("div",{style:{display:"flex",flex:1,alignItems:"center"},children:[Object(O.jsx)(tt.a,{style:{color:"rgba(0, 0, 0, 0.6)",marginRight:10}}),Object(O.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"p",children:ct(t.createdAt.toString())})]})]})})})},ut={card:{marginTop:20,marginBottom:20}},lt=function(e){var t=e.posts;return Object(O.jsxs)("div",{id:"posts-list-container",children:[t.length>0&&t.map((function(e){return Object(O.jsx)(it,{post:e},e._id)})),0===t.length&&Object(O.jsx)(f.a,{variant:"body1",gutterBottom:!0,children:"No posts found"})]})},dt=function(){var e=L((function(e){return e.accessToken})),t=L((function(e){return e.setAccessToken}));return Object(r.useEffect)((function(){e||q().then((function(e){return t("Invalid refresh token."===e?"":e)}))}),[e,t]),e},jt="#d32f2f",bt="#f2a900",pt=function(){var e=Object(u.h)().username,t=function(e){var t=Object(r.useState)(null),n=Object(Ie.a)(t,2),a=n[0],c=n[1],s=dt();return Object(r.useEffect)((function(){e&&ie(e,s).then((function(e){return c(e)}))}),[s,e]),a}(e),n=L((function(e){return e.user})),a=dt(),c=Object(r.useState)(1),s=Object(Ie.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)(""),j=Object(Ie.a)(d,2),b=j[0],p=j[1],h=Object(r.useState)(!1),x=Object(Ie.a)(h,2),m=x[0],v=x[1],g=function(e,t,n,a){var c=Object(r.useState)({posts:[],totalPages:0}),s=Object(Ie.a)(c,2),o=s[0],i=s[1];return Object(r.useEffect)((function(){e&&H(e,t,n,a).then((function(e){return i({posts:e.docs,totalPages:e.totalPages})}))}),[e,t,n,a]),o}(e,i,m,b),w=g.posts,y=g.totalPages,k=(null===t||void 0===t?void 0:t._id)===(null===n||void 0===n?void 0:n._id),S=Object(r.useState)([]),C=Object(Ie.a)(S,2),P=C[0],E=C[1],T=Object(r.useState)(null),F=Object(Ie.a)(T,2),A=F[0],W=F[1],z=Object(r.useState)(!!A),R=Object(Ie.a)(z,2),N=R[0],q=R[1];Object(r.useEffect)((function(){a&&Pe(a).then((function(e){return E(Object(De.a)(e))}))}),[a,N]),Object(r.useEffect)((function(){if(P){var e=P.find((function(e){return e.author===(null===t||void 0===t?void 0:t._id)}));W(e?Object(We.a)({},e):null)}}),[P,t]),Object(r.useEffect)((function(){q(!!A)}),[A]);var _=function(){var e=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Cannot find author to subscribe to.");case 2:return e.next=4,Te(t._id,a);case 4:q(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}throw new Error("Cannot find subscription to delete.");case 2:return e.next=4,Fe(A._id,a);case 4:q(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{id:"blog-container",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"".concat(null===t||void 0===t?void 0:t.blog," - Brainstorm Press")})}),Object(O.jsx)(f.a,{variant:"h3",component:"div",gutterBottom:!0,children:null===t||void 0===t?void 0:t.blog}),!k&&!N&&Object(O.jsx)(B.a,{onClick:_,children:"Subscribe"}),!k&&N&&Object(O.jsx)(B.a,{onClick:U,children:"Unsubscribe"}),(null===t||void 0===t?void 0:t.btcAddress)&&Object(O.jsxs)(f.a,{variant:"subtitle1",component:"div",style:{display:"flex",alignItems:"center"},gutterBottom:!0,children:[Object(O.jsx)(Re.a,{style:{fontSize:30,marginRight:10,color:bt},icon:ze.a}),null===t||void 0===t?void 0:t.btcAddress]}),Object(O.jsx)($e,{onFreeChanged:v,onSearchChanged:p}),Object(O.jsx)(lt,{posts:w}),Object(O.jsx)(Ne.a,{count:y,page:i,onChange:function(e,t){l(t)}})]})},ht=n(423),ft=function(){var e=Object(r.useState)(""),t=Object(Ie.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(Ie.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(""),d=Object(Ie.a)(l,2),j=d[0],b=d[1],p=L((function(e){return e.accessToken})),h=L((function(e){return e.setLnToken})),x=Object(r.useState)(""),m=Object(Ie.a)(x,2),v=m[0],g=m[1],w=function(){var e=Object(I.a)(D.a.mark((function e(){var t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={host:n,cert:o,macaroon:j},e.next=3,$(t,p);case 3:r=e.sent,h(r.token),g("/settings");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return v?Object(O.jsx)(u.a,{to:v}):Object(O.jsxs)("div",{id:"connect-to-ln-form",children:[Object(O.jsx)("div",{id:"host-input-container",children:Object(O.jsx)(ht.a,{id:"host",label:"Host",variant:"filled",onChange:function(e){a(e.target.value)},value:n,style:Ot.formField,fullWidth:!0,required:!0})}),Object(O.jsx)("div",{id:"cert-input-container",children:Object(O.jsx)(ht.a,{id:"tls-hex-cert",label:"TLS Certificate (HEX)",variant:"filled",value:o,onChange:function(e){i(e.target.value)},style:Ot.formField,maxRows:5,multiline:!0,fullWidth:!0,required:!0})}),Object(O.jsxs)("div",{id:"macaroon-input-container",children:[Object(O.jsx)(ht.a,{id:"macaroon",label:"Macaroon",variant:"filled",value:j,onChange:function(e){b(e.target.value)},style:Ot.formField,multiline:!0,fullWidth:!0,required:!0}),Object(O.jsx)(f.a,{variant:"subtitle1",gutterBottom:!0,children:"lncli bakemacaroon info:read offchain:read invoices:read invoices:write"})]}),Object(O.jsxs)("div",{id:"connect-to-ln-submit-container",children:[Object(O.jsx)(B.a,{variant:"contained",onClick:w,style:Ot.button,children:"Submit"}),Object(O.jsx)(B.a,{variant:"outlined",onClick:function(){g("/settings")},style:Ot.button,children:"Cancel"})]})]})},Ot={button:{marginRight:10},formField:{marginTop:20}},xt=n(26),mt=(n(136),function(){var e=Object(r.useState)(""),t=Object(Ie.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(Ie.a)(s,2),i=o[0],l=o[1],d=dt(),j=Object(r.useState)(""),b=Object(Ie.a)(j,2),p=b[0],h=b[1],x=Object(r.useState)((function(){return xt.EditorState.createEmpty()})),m=Object(Ie.a)(x,2),v=m[0],g=m[1],w=a.a.useRef(null),y=function(){var e=Object(I.a)(D.a.mark((function e(){var t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:n,content:JSON.stringify(Object(xt.convertToRaw)(v.getCurrentContent())),premium:i,published:!0},e.next=3,U(t,d);case 3:r=e.sent,h("/posts/".concat(r._id));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(I.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:n,content:JSON.stringify(Object(xt.convertToRaw)(v.getCurrentContent())),premium:i,published:!1},e.next=3,U(t,d);case 3:h("/posts/drafts");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p?Object(O.jsx)(u.a,{to:p}):Object(O.jsxs)("div",{id:"edit-post-form",children:[Object(O.jsx)(f.a,{variant:"h3",gutterBottom:!0,children:"Create New Post"}),Object(O.jsx)(ht.a,{id:"edit-post-title",label:"Title",variant:"filled",onChange:function(e){c(e.target.value)},value:n,style:vt.formField,fullWidth:!0,required:!0}),Object(O.jsx)("div",{style:{minHeight:"6em",cursor:"text",marginTop:20,padding:10},onClick:function(){var e;null===w||void 0===w||null===(e=w.current)||void 0===e||e.focus()},children:Object(O.jsx)(xt.Editor,{ref:w,editorState:v,onChange:g,handleKeyCommand:function(e,t,n){var r=xt.RichUtils.handleKeyCommand(t,e);return r?(g(r),"handled"):"not-handled"},placeholder:"Write something!"})}),Object(O.jsx)(Ge.a,{children:Object(O.jsx)(Je.a,{control:Object(O.jsx)(Ve.a,{checked:i,onChange:function(e){return l(e.target.checked)},name:"premium",color:"primary"}),label:"Premium"})}),Object(O.jsxs)("div",{id:"button-container",style:vt.formField,children:[Object(O.jsx)(B.a,{variant:"contained",onClick:y,style:vt.button,children:"Publish"}),Object(O.jsx)(B.a,{variant:"outlined",onClick:k,style:vt.button,children:"Save Draft"}),Object(O.jsx)(B.a,{onClick:function(){h("/")},style:vt.button,children:"Cancel"})]})]})}),vt={button:{marginRight:10},formField:{marginTop:20}},gt=function(){var e=Object(r.useState)(1),t=Object(Ie.a)(e,2),n=t[0],a=t[1],c=function(e){var t=Object(r.useState)({posts:[],totalPages:0}),n=Object(Ie.a)(t,2),a=n[0],c=n[1],s=L((function(e){return e.user})),o=dt();return Object(r.useEffect)((function(){o&&s&&Y(s.username,e,o).then((function(e){return c({posts:e.docs,totalPages:e.totalPages})}))}),[e,o,s]),a}(n),s=c.posts,o=c.totalPages;return Object(O.jsxs)("div",{id:"drafts-container",children:[Object(O.jsx)(f.a,{variant:"h3",gutterBottom:!0,children:"Drafts"}),Object(O.jsx)(lt,{posts:s}),Object(O.jsx)(Ne.a,{count:o,page:n,onChange:function(e,t){a(t)}})]})},wt=n(431),yt=function(e){var t=Object(r.useState)(null),n=Object(Ie.a)(t,2),a=n[0],c=n[1],s=dt();return Object(r.useEffect)((function(){e&&Z(e,s).then((function(e){return c(e)}))}),[s,e]),a},kt=function(){var e=Object(u.h)().postId,t=yt(e),n=Object(r.useState)(!0),c=Object(Ie.a)(n,2),s=c[0],o=c[1],i=Object(r.useState)((function(){return xt.EditorState.createEmpty()})),l=Object(Ie.a)(i,2),d=l[0],j=l[1],b=a.a.useRef(null),p=Object(r.useState)((null===t||void 0===t?void 0:t.title)||""),h=Object(Ie.a)(p,2),x=h[0],m=h[1],v=Object(r.useState)((null===t||void 0===t?void 0:t.premium)||!1),g=Object(Ie.a)(v,2),w=g[0],y=g[1],k=dt();Object(r.useEffect)((function(){t&&(m(t.title),y(t.premium),j(xt.EditorState.createWithContent(Object(xt.convertFromRaw)(JSON.parse(t.content)))))}),[t]);var S=function(){var e=Object(I.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Cannot find post to edit.");case 2:return n={title:x,content:JSON.stringify(Object(xt.convertToRaw)(d.getCurrentContent())),premium:w,published:t.published},e.next=5,xe(t._id,n,k);case 5:o(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?s?Object(O.jsxs)("div",{id:"edit-post-form",children:[Object(O.jsx)(ht.a,{id:"edit-post-title",label:"Title",variant:"filled",onChange:function(e){m(e.target.value)},value:x,style:St.formField,fullWidth:!0,required:!0}),Object(O.jsx)("div",{style:{minHeight:"6em",cursor:"text",marginTop:20,padding:10},onClick:function(){var e;null===b||void 0===b||null===(e=b.current)||void 0===e||e.focus()},children:Object(O.jsx)(xt.Editor,{ref:b,editorState:d,onChange:j,handleKeyCommand:function(e,t,n){var r=xt.RichUtils.handleKeyCommand(t,e);return r?(j(r),"handled"):"not-handled"},placeholder:"Write something!"})}),Object(O.jsx)(Ge.a,{children:Object(O.jsx)(Je.a,{control:Object(O.jsx)(Ve.a,{checked:w,onChange:function(e){return y(e.target.checked)},name:"premium",color:"primary"}),label:"Premium"})}),Object(O.jsxs)("div",{id:"button-container",style:St.formField,children:[Object(O.jsx)(B.a,{variant:"contained",onClick:S,style:St.button,children:"Save"}),Object(O.jsx)(B.a,{variant:"outlined",onClick:function(){o(!1)},style:St.button,children:"Cancel"})]})]}):Object(O.jsx)(u.a,{to:"/posts/".concat(t._id)}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{variant:"h1",gutterBottom:!0,children:Object(O.jsx)(wt.a,{})}),Object(O.jsx)(f.a,{variant:"h2",gutterBottom:!0,children:Object(O.jsx)(wt.a,{})}),Object(O.jsxs)(f.a,{variant:"body1",gutterBottom:!0,children:[Object(O.jsx)(wt.a,{}),Object(O.jsx)(wt.a,{}),Object(O.jsx)(wt.a,{})]})]})},St={button:{marginRight:10},formField:{marginTop:20}},Ct=n(213),Pt=n.n(Ct),Et=n(427),Tt=n(445),Bt=n(444),Ft=[{question:"What is Brainstorm Press?",answer:"Brainstorm Press is a blogging platform. You can read and write posts, and subscribe to users."},{question:"What are premium posts?",answer:"Premium posts are locked unless you have a Premium Pass for the author."},{question:"What is a Premium Pass?",answer:"When you purchase a Premium Pass for an author, you get unlimited access to their premium posts for thirty days. Authors set their own price for their Premium Passes."},{question:"How do I purchase a Premium Pass?",answer:"If you try to read a premium post and you don't have an active Premium Pass for the author, you will be shown a Lightning invoice. Paying that invoice will buy you a thirty day Premium Pass for the author of the post you were trying to read."},{question:"Do I need bitcoin to use Brainstorm Press?",answer:"You can write as much as you want, and read all the free posts you like, without any bitcoin. In order to access premium posts, you will need some bitcoin to buy Premium Passes."},{question:"Do I need a Lightning node to use Brainstorm Press?",answer:"You only need a Lightning node if you are publishing premium posts. Every time a user purchases your Premium Pass, their payment goes directly to your node."},{question:"How do I report bugs or suggest features?",answer:"Feel free to open an issue on our GitHub."}],At=function(){return Object(O.jsxs)(T.a,{children:[Object(O.jsx)(f.a,{variant:"h2",gutterBottom:!0,children:"FAQ"}),Ft.map((function(e){return Object(O.jsxs)(Et.a,{children:[Object(O.jsx)(Bt.a,{expandIcon:Object(O.jsx)(Pt.a,{}),children:Object(O.jsx)(f.a,{variant:"h5",gutterBottom:!0,children:e.question})}),Object(O.jsx)(Tt.a,{children:Object(O.jsx)(f.a,{variant:"body1",gutterBottom:!0,children:e.answer})})]},e.question)}))]})},Lt=function(){var e=(Object(u.g)().state||!1).logout,t=L((function(e){return e.setUser})),n=L((function(e){return e.setAccessToken})),a=L((function(e){return e.setLnToken})),c=Object(r.useState)(""),s=Object(Ie.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(!1),d=Object(Ie.a)(l,2),j=d[0],b=d[1],p=Object(r.useState)(1),h=Object(Ie.a)(p,2),f=h[0],x=h[1],m=function(e,t,n){var a=Object(r.useState)({posts:[],totalPages:0}),c=Object(Ie.a)(a,2),s=c[0],o=c[1];return Object(r.useEffect)((function(){G(e,t,n).then((function(e){o({posts:e.docs,totalPages:e.totalPages})}))}),[e,t,n]),s}(f,j,o),v=m.posts,g=m.totalPages;return Object(r.useEffect)((function(){e&&function(){var e=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge();case 2:a(""),n(""),t(null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[e,n,a,t]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)($e,{onFreeChanged:b,onSearchChanged:i}),Object(O.jsx)(lt,{posts:v}),Object(O.jsx)(Ne.a,{count:g,page:f,onChange:function(e,t){x(t)}})]})},Wt=n(446),Dt=n(421),It=n(432),zt=n(447),Rt=n(217),Nt=n(434),qt=Object(Rt.a)(),_t=function(){var e=Object(r.useState)(""),t=Object(Ie.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(Ie.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(""),d=Object(Ie.a)(l,2),j=d[0],b=d[1],p=Object(r.useState)(""),h=Object(Ie.a)(p,2),x=h[0],m=h[1],v=L((function(e){return e.setUser})),g=L((function(e){return e.setAccessToken})),w=L((function(e){return e.setLnToken})),y=function(){var e=Object(I.a)(D.a.mark((function e(t){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={email:n,password:o},e.next=4,se(r);case 4:"error"in(a=e.sent)?m(a.error):(m(""),v(a.user),g(a.accessToken),a.user.node&&w(a.user.node.token),b("/"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b("/reset-password");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return j?Object(O.jsx)(u.a,{to:j}):Object(O.jsx)(Nt.a,{theme:qt,children:Object(O.jsxs)(Wt.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(Dt.a,{}),Object(O.jsxs)(T.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(O.jsx)(f.a,{component:"h1",variant:"h5",children:"Log in"}),Object(O.jsxs)(T.a,{component:"form",onSubmit:y,noValidate:!0,sx:{mt:1},children:[Object(O.jsx)(ht.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",value:n,onChange:function(e){return a(e.target.value)},error:!!x,autoFocus:!0}),Object(O.jsx)(ht.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o,onChange:function(e){return i(e.target.value)},error:!!x,inputProps:{"data-testid":"password"}}),x&&Object(O.jsx)(f.a,{variant:"subtitle1",component:"div",style:{color:jt},gutterBottom:!0,children:"Invalid credentials."}),Object(O.jsx)(B.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Log In"}),Object(O.jsxs)(It.a,{container:!0,children:[Object(O.jsx)(It.a,{item:!0,xs:!0,children:Object(O.jsx)(zt.a,{href:"#",variant:"body2",onClick:k,children:"Forgot password?"})}),Object(O.jsx)(It.a,{item:!0,children:Object(O.jsx)(zt.a,{href:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})})},Ut=n(448),Jt=n(439),Gt=n(214),Ht=n.n(Gt),Kt=function(){var e,t=Object(u.h)().postId,n=yt(t),c=Object(r.useState)(!1),s=Object(Ie.a)(c,2),l=s[0],d=s[1],j=Object(r.useState)(""),b=Object(Ie.a)(j,2),p=b[0],h=b[1],x=Object(r.useState)(!1),m=Object(Ie.a)(x,2),v=m[0],g=m[1],w=Object(r.useState)(null),y=Object(Ie.a)(w,2),k=y[0],S=y[1],C=Object(r.useState)(!1),P=Object(Ie.a)(C,2),E=P[0],F=P[1],A=Object(r.useState)(!0),W=Object(Ie.a)(A,2),z=W[0],R=W[1],N=L((function(e){return e.user})),q=dt(),_=(null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e._id)===(null===N||void 0===N?void 0:N._id),U=Object(r.useState)("Looking."),J=Object(Ie.a)(U,2),G=J[0],H=J[1],K=Object(r.useState)((function(){return xt.EditorState.createEmpty()})),Y=Object(Ie.a)(K,2),V=Y[0],M=Y[1],Q=a.a.useRef(null);Object(r.useEffect)((function(){n&&M(xt.EditorState.createWithContent(Object(xt.convertFromRaw)(JSON.parse(n.content))))}),[n]),Object(r.useEffect)((function(){n&&"Looking."!==G&&R(!1)}),[n,G]),Object(r.useEffect)((function(){n&&n.user.node&&ne(n.user.node.toString(),q).then((function(e){return H(e)})),n&&!n.user.node&&H("Not found.")}),[n,q]),Object(r.useEffect)((function(){var e=function(){var e=Object(I.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}throw new Error("Cannot create invoice without a user.");case 2:return e.next=4,je(t,q);case 4:n=e.sent,S({payreq:n.payreq,hash:n.hash,amount:n.amount});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&N&&n.user.subscriptionPrice>0&&!v&&!k&&!_&&"Connected."===G&&E&&e()}),[n,N,v,k,G,E,_,q,t]),Object(r.useEffect)((function(){n&&q&&pe(n.user._id,q).then((function(e){g(e.paid),F(!0)}))}),[n,q]),Object(r.useEffect)((function(){if(n){var e=new WebSocket("ws://".concat("brainstorm-press-api.herokuapp.com","/api/events"));e.onopen=function(){console.debug("Connected to web socket.")},e.onmessage=function(){var e=Object(I.a)(D.a.mark((function e(t){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("ws onmessage, post:",n),"invoice-paid"!==(r=JSON.parse(t.data)).type){e.next=8;break}if(n){e.next=5;break}throw new Error("Cannot log payment without a post.");case 5:g(!0),a={hash:r.data.hash},fe(n.user._id,a,q);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),[n,q]);var Z=function(){_&&d(!0)},X=function(){var e=Object(I.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("Cannot find post to publish.");case 2:if(N){e.next=4;break}throw new Error("Cannot publish post without a user.");case 4:return t=Object(We.a)(Object(We.a)({},n),{},{published:!0}),e.next=7,xe(n._id,t,q);case 7:h("/posts/drafts");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("Cannot find post to delete.");case 2:return e.next=4,ve(n._id,q);case 4:h("/");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{variant:"h3",gutterBottom:!0,children:Object(O.jsx)(wt.a,{})}),Object(O.jsx)(f.a,{variant:"h4",gutterBottom:!0,children:Object(O.jsx)(wt.a,{})}),Object(O.jsxs)(f.a,{variant:"body1",gutterBottom:!0,children:[Object(O.jsx)(wt.a,{}),Object(O.jsx)(wt.a,{}),Object(O.jsx)(wt.a,{})]})]})},te=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{variant:"h3",component:"div",gutterBottom:!0,children:null===n||void 0===n?void 0:n.title}),Object(O.jsxs)(Jt.a,{elevation:3,style:{padding:20,maxWidth:"500px",marginLeft:"auto",marginRight:"auto"},children:[Object(O.jsx)(f.a,{variant:"h5",component:"div",gutterBottom:!0,children:"This is a premium post."}),Object(O.jsxs)(f.a,{variant:"h6",component:"div",gutterBottom:!0,children:["Pay ",null===k||void 0===k?void 0:k.amount," sats to get access to all of"," ",null===n||void 0===n?void 0:n.user.username,"'s premium posts for thirty days."]}),Object(O.jsx)(T.a,{style:{display:"flex",justifyContent:"center",margin:20},children:Object(O.jsx)(Ht.a,{value:(null===k||void 0===k?void 0:k.payreq)||""})}),Object(O.jsx)(f.a,{variant:"body1",component:"div",style:{wordWrap:"break-word"},gutterBottom:!0,children:null===k||void 0===k?void 0:k.payreq})]})]})},re=!(!n||_||v||!n.premium||!k||l),ae=!(!n||"Looking."===G||!_&&!v&&n.premium&&"Not found."!==G&&0!==n.user.subscriptionPrice||l),ce=function(){return n?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{variant:"h3",component:"div",gutterBottom:!0,children:n.title}),Object(O.jsxs)("div",{style:{display:"flex",flex:1,alignItems:"center",justifyContent:"space-between"},children:[Object(O.jsx)("div",{style:{display:"flex",flex:1,alignItems:"center"},children:Object(O.jsxs)(f.a,{variant:"body2",color:"textSecondary",component:"p",children:[Object(O.jsx)(i.b,{to:"/users/".concat(n.user.username,"/blog"),style:{textDecoration:"none"},children:n.user.username})," ","\xb7"," ",ct(n.createdAt.toString(),"short")]})}),_&&Object(O.jsxs)("div",{className:"post-actions",children:[!(null===n||void 0===n?void 0:n.published)&&Object(O.jsx)(B.a,{className:"publish-post",onClick:X,children:"Publish"}),Object(O.jsx)(B.a,{className:"edit-post",onClick:Z,children:"Edit"}),Object(O.jsx)(B.a,{className:"delete-post",onClick:$,children:"Delete"})]})]}),Object(O.jsx)(Ut.a,{variant:"middle",style:{marginTop:20,marginBottom:20}}),Object(O.jsx)(f.a,{variant:"body1",component:"div",gutterBottom:!0,children:Object(O.jsx)(xt.Editor,{ref:Q,editorState:V,onChange:M,readOnly:!0})})]}):Object(O.jsx)(O.Fragment,{})};return p?Object(O.jsx)(u.a,{to:"/"}):l?Object(O.jsx)(u.a,{to:"/posts/".concat(t,"/edit")}):!N&&n&&n.premium?Object(O.jsxs)(T.a,{children:[Object(O.jsx)(f.a,{variant:"h6",component:"div",gutterBottom:!0,children:"You have to be logged in to read paywalled posts."}),Object(O.jsx)(i.b,{to:"/login",children:"Log in"})]}):Object(O.jsxs)("div",{id:"post-container",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"".concat(null===n||void 0===n?void 0:n.title," - ").concat(null===n||void 0===n?void 0:n.user.username," - Brainstorm Press")})}),z&&Object(O.jsx)(ee,{}),re&&Object(O.jsx)(te,{}),ae&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(ce,{})})]})},Yt=n(215),Vt=n.n(Yt),Mt=function(){var e,t=L((function(e){return e.user})),n=L((function(e){return e.lnToken})),a=Object(r.useState)(""),c=Object(Ie.a)(a,2),s=c[0],o=c[1],i=function(e){var t=Object(r.useState)(null),n=Object(Ie.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){e?ee(e).then((function(e){return c(e)})):c(null)}),[e]),a}(n),l=function(){return Object(O.jsx)(st.a,{icon:Object(O.jsx)(Vt.a,{}),label:i?"Lightning node connected":"Lightning node not connected",color:i?"success":"error",variant:"outlined"})};return s?Object(O.jsx)(u.a,{to:s}):Object(O.jsxs)("div",{id:"settings-container",children:[Object(O.jsxs)(f.a,{variant:"h3",gutterBottom:!0,children:["Welcome, ",null===t||void 0===t?void 0:t.username,"."]}),Object(O.jsx)(l,{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),!!i&&Object(O.jsx)(st.a,{icon:Object(O.jsx)(Re.a,{style:{fontSize:22,color:bt},icon:ze.a}),label:"Balance: ".concat((e=(null===i||void 0===i?void 0:i.balance)||0,e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))," sats"),color:"warning",variant:"outlined"}),Object(O.jsxs)(T.a,{style:{display:"flex",flex:1,flexDirection:"row",marginTop:30},children:[Object(O.jsx)(B.a,{onClick:function(){return o("/drafts")},style:{marginRight:10},children:"Drafts"}),Object(O.jsx)(B.a,{onClick:function(){return o("/settings")},children:"Settings"})]})]})},Qt=Object(Rt.a)(),Zt=function(){var e=Object(u.h)(),t=e.userId,n=e.token,a=Object(r.useState)(""),c=Object(Ie.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)(""),l=Object(Ie.a)(i,2),d=l[0],j=l[1],b=Object(r.useState)(""),p=Object(Ie.a)(b,2),h=p[0],x=p[1],m=Object(r.useState)(""),v=Object(Ie.a)(m,2),g=v[0],w=v[1],y=function(){var e=Object(I.a)(D.a.mark((function e(r){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),s===d){e.next=5;break}w("Passwords do not match."),e.next=10;break;case 5:return a={password:s},e.next=8,ye(a,t,n);case 8:w(""),x("/login");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h?Object(O.jsx)(u.a,{to:h}):Object(O.jsx)(Nt.a,{theme:Qt,children:Object(O.jsxs)(Wt.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(Dt.a,{}),Object(O.jsxs)(T.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(O.jsx)(f.a,{component:"h1",variant:"h5",children:"Choose a new password"}),Object(O.jsxs)(T.a,{component:"form",onSubmit:y,noValidate:!0,sx:{mt:1},children:[Object(O.jsx)(ht.a,{margin:"normal",required:!0,fullWidth:!0,id:"password",label:"Password",name:"password",autoComplete:"password",type:"password",value:s,onChange:function(e){return o(e.target.value)},error:!!g,autoFocus:!0}),Object(O.jsx)(ht.a,{margin:"normal",required:!0,fullWidth:!0,name:"password-confirmation",label:"Confirm Password",type:"password",id:"password-confirmation",value:d,onChange:function(e){return j(e.target.value)},error:!!g}),g&&Object(O.jsx)(f.a,{variant:"subtitle1",component:"div",style:{color:jt},gutterBottom:!0,children:g}),Object(O.jsx)(B.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Reset Password"})]})]})]})})},Xt=Object(Rt.a)(),$t=function(){var e=Object(r.useState)(""),t=Object(Ie.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(Ie.a)(c,2),o=s[0],i=s[1],u=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,we(n);case 3:i(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(Nt.a,{theme:Xt,children:Object(O.jsxs)(Wt.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(Dt.a,{}),Object(O.jsxs)(T.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(O.jsx)(f.a,{component:"h1",variant:"h5",children:o?"Check your email":"Reset your password"}),Object(O.jsxs)(T.a,{component:"form",onSubmit:u,noValidate:!0,sx:{mt:1},children:[!o&&Object(O.jsx)(ht.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",value:n,onChange:function(e){return a(e.target.value)},autoFocus:!0}),o&&Object(O.jsx)(f.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:"If there is an account associated with that email, we've sent an email there with a link you can use to reset your password."}),!o&&Object(O.jsx)(B.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Send Email"})]})]})]})})},en=n(216),tn=n.n(en),nn=n(449),rn=n(453),an=n(451),cn=n(452),sn=n(450),on=n(428),un=n(143),ln=function(){var e=L((function(e){return e.user})),t=L((function(e){return e.setUser})),n=dt(),a=L((function(e){return e.setAccessToken})),c=L((function(e){return e.lnToken})),s=L((function(e){return e.setLnToken})),o=Object(r.useState)(!1),i=Object(Ie.a)(o,2),l=i[0],d=i[1],j=Object(r.useState)(""),b=Object(Ie.a)(j,2),x=b[0],m=b[1],v=Object(r.useState)((null===e||void 0===e?void 0:e.email)||""),g=Object(Ie.a)(v,2),w=g[0],y=g[1],k=Object(r.useState)((null===e||void 0===e?void 0:e.blog)||""),S=Object(Ie.a)(k,2),C=S[0],P=S[1],E=Object(r.useState)((null===e||void 0===e?void 0:e.btcAddress)||""),F=Object(Ie.a)(E,2),A=F[0],W=F[1],z=Object(r.useState)((null===e||void 0===e?void 0:e.subscriptionPrice)||0),R=Object(Ie.a)(z,2),N=R[0],q=R[1],_=Object(r.useState)(!1),U=Object(Ie.a)(_,2),G=U[0],H=U[1],K=Object(r.useState)(!1),Y=Object(Ie.a)(K,2),V=Y[0],M=Y[1],Q=function(e){W(e.target.value)},Z=function(){var r=Object(I.a)(D.a.mark((function r(){return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}throw new Error("Cannot delete user if no user is present.");case 2:return r.next=4,Se(e._id,n);case 4:t(null),a(""),s(""),m("/");case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();Object(r.useEffect)((function(){!C&&(null===e||void 0===e?void 0:e.blog)&&P(null===e||void 0===e?void 0:e.blog),!w&&(null===e||void 0===e?void 0:e.email)&&y(null===e||void 0===e?void 0:e.email),!N&&(null===e||void 0===e?void 0:e.subscriptionPrice)&&q(null===e||void 0===e?void 0:e.subscriptionPrice)}),[e,C,w,N]);var X=Object(O.jsx)(p.a,{size:"small",onClick:function(){return d(!1)},color:"inherit",children:Object(O.jsx)(tn.a,{fontSize:"small"})});return x?Object(O.jsx)(u.a,{to:x}):Object(O.jsxs)("div",{id:"settings-container",children:[Object(O.jsx)(f.a,{variant:"h3",gutterBottom:!0,children:"Settings"}),Object(O.jsxs)(f.a,{variant:"body1",component:"div",style:{marginBottom:20},gutterBottom:!0,children:["Welcome ",null===e||void 0===e?void 0:e.username]}),Object(O.jsx)(ht.a,{id:"edit-email",label:"Email",variant:"outlined",onChange:function(e){y(e.target.value)},value:w,fullWidth:!0}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)(ht.a,{id:"edit-blog-title",label:"Blog",variant:"outlined",onChange:function(e){P(e.target.value)},value:C,fullWidth:!0}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)(h.a,{title:"Monthly price readers pay to access your premium posts",children:Object(O.jsx)(ht.a,{id:"edit-subscription-price",label:"Premium Pass Price (sats)",variant:"outlined",onChange:function(e){var t=parseInt(e.target.value,10)||0;q(t)},value:N,fullWidth:!0})}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),G&&Object(O.jsx)(ht.a,{error:!0,id:"edit-btc-address-invalid",label:"BTC Address",variant:"outlined",onChange:Q,value:A,helperText:"Invalid BTC address",fullWidth:!0}),!G&&Object(O.jsx)(ht.a,{id:"edit-btc-address",label:"BTC Address",variant:"outlined",onChange:Q,value:A,fullWidth:!0}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)(T.a,{style:{display:"flex",flex:1,flexDirection:"row"},children:[Object(O.jsx)(B.a,{variant:"contained",onClick:function(){var t;if(e)if(A&&!Object(un.a)(A))H(!0);else if(A&&Object(un.a)(A)){H(!1);var r={email:w,blog:C,subscriptionPrice:N,btcAddress:A};t=ae(e._id,r,n)}else{var a={email:w,blog:C,subscriptionPrice:N};t=ae(e._id,a,n)}t&&d(!0)},style:{marginRight:15},children:"Save Changes"}),!c&&Object(O.jsx)(B.a,{variant:"outlined",onClick:function(){m("/connect-to-ln")},style:{marginRight:15},children:"Connect to Lightning"}),c&&Object(O.jsx)(B.a,{variant:"outlined",color:"error",onClick:function(){J(c),s("")},style:{marginRight:15},children:"Disconnect Lightning Node"}),Object(O.jsx)(B.a,{id:"prompt-to-delete-account",variant:"outlined",color:"error",onClick:function(){M(!0)},style:{marginRight:15},children:"Delete Account"})]}),Object(O.jsx)(on.a,{open:l,autoHideDuration:3e3,onClose:function(){return d(!1)},message:"Saved changes successfully.",action:X}),Object(O.jsxs)(nn.a,{open:V,onClose:function(){return M(!1)},children:[Object(O.jsx)(sn.a,{children:"Are you sure you want to delete your account?"}),Object(O.jsxs)(an.a,{children:[Object(O.jsx)(cn.a,{children:"Deleting your account permanently deletes all of your user data, including your posts, Lightning node data, and all transaction records."}),Object(O.jsxs)(rn.a,{children:[Object(O.jsx)(B.a,{onClick:function(){return M(!1)},children:"Cancel"}),Object(O.jsx)(B.a,{id:"delete-account",onClick:Z,children:"Delete Account"})]})]})]})]})},dn=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},jn=Object(Rt.a)(),bn=function(){var e=Object(r.useState)(""),t=Object(Ie.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(Ie.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(""),d=Object(Ie.a)(l,2),j=d[0],b=d[1],p=Object(r.useState)(""),h=Object(Ie.a)(p,2),x=h[0],m=h[1],v=Object(r.useState)(""),g=Object(Ie.a)(v,2),w=g[0],y=g[1],k=Object(r.useState)(""),S=Object(Ie.a)(k,2),C=S[0],P=S[1],E=Object(r.useState)(""),F=Object(Ie.a)(E,2),A=F[0],W=F[1],z=L((function(e){return e.user})),R=L((function(e){return e.setUser})),N=L((function(e){return e.setAccessToken})),q=function(){var e=Object(I.a)(D.a.mark((function e(t){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!dn(o)){e.next=24;break}return r={username:n,email:o,password:j,blog:"".concat(n,"'s Blog")},e.next=5,ce(r);case 5:if(!("error"in(a=e.sent))){e.next=19;break}e.t0=a.error,e.next="Invalid username."===e.t0?10:"Username taken."===e.t0?12:"Email taken."===e.t0?14:16;break;case 10:return m("Invalid username. Usernames may only contain letters, numbers, hyphens, and underscores."),e.abrupt("break",17);case 12:return m("Username not available."),e.abrupt("break",17);case 14:return y("Email already in use. Please log in."),e.abrupt("break",17);case 16:W(a.error);case 17:e.next=22;break;case 19:m(""),y(""),P(""),W(""),R(a.user),N(a.accessToken);case 22:e.next=25;break;case 24:y("Please enter a valid email address.");case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return z?Object(O.jsx)(u.a,{to:"/"}):Object(O.jsx)(Nt.a,{theme:jn,children:Object(O.jsxs)(Wt.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(Dt.a,{}),Object(O.jsxs)(T.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(O.jsx)(f.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(O.jsxs)(T.a,{component:"form",noValidate:!0,onSubmit:q,sx:{mt:3},children:[Object(O.jsxs)(It.a,{container:!0,spacing:2,children:[Object(O.jsx)(It.a,{item:!0,xs:12,children:Object(O.jsx)(ht.a,{autoComplete:"username",name:"username",required:!0,fullWidth:!0,id:"username",label:"Username",value:n,onChange:function(e){a(e.target.value.replace(/[^a-zA-Z0-9_-]/gi,""))},error:!!x||!!A,helperText:x,autoFocus:!0})}),Object(O.jsx)(It.a,{item:!0,xs:12,children:Object(O.jsx)(ht.a,{autoComplete:"email",name:"email",required:!0,fullWidth:!0,id:"email",label:"Email",value:o,onChange:function(e){return i(e.target.value)},error:!!w||!!A,helperText:w,autoFocus:!0})}),Object(O.jsx)(It.a,{item:!0,xs:12,children:Object(O.jsx)(ht.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:j,onChange:function(e){return b(e.target.value)},error:!!C||!!A,helperText:C,inputProps:{"data-testid":"password"}})}),A&&Object(O.jsx)(It.a,{item:!0,xs:12,children:Object(O.jsx)(f.a,{variant:"subtitle1",component:"div",style:{color:jt},gutterBottom:!0,children:A})})]}),Object(O.jsx)(B.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(O.jsx)(It.a,{container:!0,justifyContent:"flex-end",children:Object(O.jsx)(It.a,{item:!0,children:Object(O.jsx)(zt.a,{href:"/login",variant:"body2",children:"Already have an account? Log in"})})})]})]})]})})},pn=function(){var e=Object(r.useState)(1),t=Object(Ie.a)(e,2),n=t[0],a=t[1],c=function(e){var t=Object(r.useState)({posts:[],totalPages:0}),n=Object(Ie.a)(t,2),a=n[0],c=n[1],s=dt();return Object(r.useEffect)((function(){s&&M(e,s).then((function(e){return c({posts:e.docs,totalPages:e.totalPages})}))}),[e,s]),a}(n),s=c.posts,o=c.totalPages;return Object(O.jsxs)("div",{id:"subs-container",children:[Object(O.jsx)("h3",{children:"Subscriptions"}),Object(O.jsx)(lt,{posts:s}),Object(O.jsx)(Ne.a,{count:o,page:n,onChange:function(e,t){a(t)}})]})};var hn={appContainer:{width:"75%",marginLeft:"auto",marginRight:"auto",marginBottom:"50px"}},fn=function(){return Object(O.jsxs)(i.a,{children:[Object(O.jsx)(Ae,{}),Object(O.jsx)("div",{id:"app-container",style:hn.appContainer,children:Object(O.jsxs)(u.d,{children:[Object(O.jsxs)(u.b,{path:"/signup",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Sign Up - Brainstorm Press"})}),Object(O.jsx)(bn,{})]}),Object(O.jsxs)(u.b,{path:"/login",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Log In - Brainstorm Press"})}),Object(O.jsx)(_t,{})]}),Object(O.jsxs)(u.b,{path:"/faq",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"FAQ - Brainstorm Press"})}),Object(O.jsx)(At,{})]}),Object(O.jsxs)(u.b,{path:"/reset-password/:userId/:token",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Create a New Password - Brainstorm Press"})}),Object(O.jsx)(Zt,{})]}),Object(O.jsxs)(u.b,{path:"/reset-password",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Reset Your Password - Brainstorm Press"})}),Object(O.jsx)($t,{})]}),Object(O.jsxs)(u.b,{path:"/connect-to-ln",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Connect To Lightning - Brainstorm Press"})}),Object(O.jsx)(ft,{})]}),Object(O.jsxs)(u.b,{path:"/profile",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Profile - Brainstorm Press"})}),Object(O.jsx)(Mt,{})]}),Object(O.jsxs)(u.b,{path:"/settings",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Settings - Brainstorm Press"})}),Object(O.jsx)(ln,{})]}),Object(O.jsxs)(u.b,{path:"/subscriptions",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Subscriptions - Brainstorm Press"})}),Object(O.jsx)(pn,{})]}),Object(O.jsxs)(u.b,{path:"/posts/new",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"New Post - Brainstorm Press"})}),Object(O.jsx)(mt,{})]}),Object(O.jsxs)(u.b,{path:"/drafts",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Drafts - Brainstorm Press"})}),Object(O.jsx)(gt,{})]}),Object(O.jsxs)(u.b,{path:"/posts/:postId/edit",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Edit Post - Brainstorm Press"})}),Object(O.jsx)(kt,{})]}),Object(O.jsx)(u.b,{path:"/posts/:postId",children:Object(O.jsx)(Kt,{})}),Object(O.jsx)(u.b,{path:"/users/:username/blog",children:Object(O.jsx)(pt,{})}),Object(O.jsxs)(u.b,{path:"/",children:[Object(O.jsx)(o.a,{children:Object(O.jsx)("title",{children:"Home - Brainstorm Press"})}),Object(O.jsx)(Lt,{})]})]})}),Object(O.jsx)(x,{})]})},On=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,457)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(fn,{})}),document.getElementById("root")),On()}},[[359,1,2]]]);
//# sourceMappingURL=main.f31edd07.chunk.js.map